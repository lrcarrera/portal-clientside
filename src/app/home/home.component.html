
<mat-card-content>
  <mat-grid-list cols="4" rowHeight="100px">

    <mat-grid-tile class="mat-elevation-z4 grid-test-1" [colspan]="1" [rowspan]="1" style="background-color: aliceblue;">
      <!--  <mat-card class="name-logo-style">
          <mat-card-header class="header-name-logo-style">-->
      <form [formGroup]="findForm" (ngSubmit)="findCustomer()">
        <input type="text" formControlName="customerId" placeholder="Search DNI:">
        <input type="submit" value="Find" class="customer-button-search">
      </form>
      <!--</mat-card-header>
           </mat-card>-->
    </mat-grid-tile>

    <mat-grid-tile class="mat-elevation-z4 grid-test-1" [colspan]="1" [rowspan]="1" style="background-color: white;">
      <mat-card class="name-logo-style">
        <mat-card-header class="header-name-logo-style">
          <div mat-card-avatar class="example-header-image"></div>


          <mat-card-title *ngIf="showCustomerNameLoading" class="title-info-style">
            <mat-spinner  class="customer-name-loading" [diameter]="20"></mat-spinner>
          </mat-card-title>

          <mat-card-title class="title-info-style" *ngIf="!customerName && !showCustomerNameLoading"> Search a customer... </mat-card-title>

          <mat-card-title class="title-info-style" *ngIf="customerName">{{customerName}}</mat-card-title>

          <mat-card-subtitle>Customer</mat-card-subtitle>
        </mat-card-header>
      </mat-card>
    </mat-grid-tile>

    <mat-grid-tile class="mat-elevation-z4 grid-test-1" [colspan]="2" [rowspan]="1" style="background-color: aliceblue;">
      <mat-card class="more-info-style">
        <mat-card-header >
          <!--<div mat-card-avatar class="example-header-image"></div>

          <mat-card-title class="title-info-style" *ngIf="!customerName"> pepepepe </mat-card-title>
          <mat-card-title class="title-info-style" *ngIf="customerName">{{customerName}}</mat-card-title>
          <mat-card-subtitle>Customer</mat-card-subtitle>
        -->
          <div class="label-isolate" *ngIf="!customerDni || !customerPhone || !customerAddress">
            <strong *ngIf="!showCustomerNameLoading"> Search a customer...</strong>
            <mat-spinner *ngIf="showCustomerNameLoading"  class="customer-name-loading" [diameter]="20"></mat-spinner>

          </div>
          <div class="label-isolate" *ngIf="customerDni"> {{customerDni}} </div>
          <div class="label-isolate" *ngIf="customerPhone"> {{customerPhone}} </div>
          <div class="label-isolate" *ngIf="customerAddress"> {{customerAddress}}  </div>


        </mat-card-header>
      </mat-card>

    </mat-grid-tile>

  </mat-grid-list>
</mat-card-content>
<br><br>





<mat-card-content class=" mat-elevation-z4 global-position-header-style">
  <mat-grid-list cols="3" rowHeight="30px">
    <mat-grid-tile class="mat-elevation-z4" [colspan]="1" [rowspan]="1"  style="background-color: aliceblue;">

      <strong >Graphic Movements</strong>

    </mat-grid-tile>

    <mat-grid-tile class="mat-elevation-z4" [colspan]="1" [rowspan]="1"  style="background-color: aliceblue;">
      <strong >Relations with Bank</strong>
    </mat-grid-tile>

    <mat-grid-tile class="mat-elevation-z4" [colspan]="1" [rowspan]="1"  style="background-color: aliceblue;">
      <strong >Commercial Information</strong>
    </mat-grid-tile>

    <!--  <mat-grid-tile  [colspan]="1" [rowspan]="1"  style="background-color: aliceblue;">
        <mat-spinner *ngIf="isCommercialInformationLoading" class="center_three_central_widget_header" [diameter]="20"></mat-spinner>
      </mat-grid-tile>-->

  </mat-grid-list>
</mat-card-content>

<!-- GRAPHIC MOVEMENTS RELATIONS WITH BANK AND CUSTOMER INFORMATION BODY WIDGETS -->
<mat-card-content>
  <mat-grid-list cols="3" rowHeight="120px">
    <mat-grid-tile style="background-color: aliceblue; left: 0px; width: calc(((32.3333% - 0.666667px) * 1) + 0px) !important ; top: 0px; height: calc(241px);" class=" mat-elevation-z4" [colspan]="1" [rowspan]="2" style="background-color: white;">
      <!-- <mat-spinner [diameter]="50"></mat-spinner>-->
      <!--graphic-->
      <mat-spinner *ngIf="showGraphicLoading" [diameter]="50"></mat-spinner>
      <app-bar-chart *ngIf="!showGraphicLoading" [data]="data | async"></app-bar-chart>

    </mat-grid-tile>
    <mat-grid-tile style="background-color: aliceblue; left: 0px; width: calc(((32.3333% - 0.666667px) * 1) + 0px)!important ; top: 0px; height: calc(241px);" class=" mat-elevation-z4" [colspan]="1" [rowspan]="2" style="background-color: white;">

      <mat-spinner *ngIf="showRelationsLoading" [diameter]="50"></mat-spinner>

      <mat-list *ngIf="!showRelationsLoading" class="commercial-information-list-style">

        <mat-list-item class="commercial-information-risk-money-font">Advisor:
          <span class="commercial-information-results-color-text">&emsp;{{ customerOffice }}</span>
        </mat-list-item>

        <mat-divider style="margin-top: 10px;"></mat-divider>


        <mat-grid-list style="height: 100%;" cols="2" rowHeight="2:1">
          <mat-grid-tile style="height: 100%; background-color: white;">


            <mat-list class="relations-groups-list-style">

              <mat-list-item class="commercial-information-risk-money-font">Familiar Group:
              </mat-list-item>
              <mat-divider style="margin-top: 0;"></mat-divider>
              <mat-list-item style="margin-top: 15px;" class="commercial-information-risk-money-font">Tasks:
              </mat-list-item>
              <mat-list-item style="margin-top: -20px;" class="commercial-information-risk-money-font">Campaigns:
              </mat-list-item>
              <mat-list-item style="margin-top: -20px;" class="commercial-information-risk-money-font">Documents:
              </mat-list-item>
              </mat-list>





          </mat-grid-tile>
          <mat-grid-tile style="height: 100%; background-color: white;">

            <mat-list class="relations-groups-list-style">

              <mat-list-item class="commercial-information-risk-money-font">Economical Group:
              </mat-list-item>
              <mat-divider style="margin-top: 0;"></mat-divider>
              <mat-list-item style="margin-top: 15px;" class="commercial-information-risk-money-font">Tasks:
              </mat-list-item>
              <mat-list-item style="margin-top: -20px;" class="commercial-information-risk-money-font">Campaigns:
              </mat-list-item>
              <mat-list-item style="margin-top: -20px;" class="commercial-information-risk-money-font">Documents:
              </mat-list-item>




            </mat-list>


          </mat-grid-tile>
        </mat-grid-list>





        <!--<mat-list-item  style="height: 40px;"         class="commercial-information-risk-money-font">
           Level of exposure to risk of money-laundering:
           <span class="commercial-information-results-color-text">&emsp;{{ customerRiskLaundering }}</span>
         </mat-list-item>
         <mat-list-item  style="height: 0px;" class="commercial-information-risk-money-font">
           Revision date:  <span class="commercial-information-results-color-text">&emsp;{{ customerRevisionDate }}</span>
         </mat-list-item>
         <mat-divider style="margin-top: 30px;"></mat-divider>
         <mat-list-item style="height: 30px;" class="commercial-information-risk-money-font">Profile of Convenience:</mat-list-item>
         <mat-list-item style="height: 0px;" class="commercial-information-risk-money-font">Knowledge and Experience</mat-list-item>
         <mat-list-item style="margin-top: 10px; height: 30px;" class="commercial-information-products-font">Profile status:
           <span class="commercial-information-results-color-text">&emsp;{{ customerDerivativeStatus }}</span>
         </mat-list-item>
         <mat-list-item style="height: 0px;" class="commercial-information-products-font">Products:
           <span class="commercial-information-results-color-text">&emsp;{{ customerProductsQty }}</span>
         </mat-list-item>-->
      </mat-list>

      <!--relations-->
    </mat-grid-tile>






    <mat-grid-tile style="background-color: aliceblue; left: 0px; width: calc(((32.3333% - 0.666667px) * 1) + 0px)!important ; top: 0px; height: calc(241px);" class="mat-elevation-z4" [colspan]="1" [rowspan]="2" style="background-color: white;">

      <mat-spinner *ngIf="showCommercialLoading" [diameter]="50"></mat-spinner>

      <mat-list *ngIf="!showCommercialLoading" class="commercial-information-list-style">
        <mat-list-item class="commercial-information-risk-money-font">Office:
          <span class="commercial-information-results-color-text">&emsp;{{ customerOffice }}</span>
        </mat-list-item>
        <mat-divider style="margin-top: 10px;"></mat-divider>
        <mat-list-item  style="height: 40px;"         class="commercial-information-risk-money-font">
          Level of exposure to risk of money-laundering:
          <span class="commercial-information-results-color-text">&emsp;{{ customerRiskLaundering }}</span>
        </mat-list-item>
        <mat-list-item  style="height: 0px;" class="commercial-information-risk-money-font">
          Revision date:  <span class="commercial-information-results-color-text">&emsp;{{ customerRevisionDate }}</span>
        </mat-list-item>
        <mat-divider style="margin-top: 30px;"></mat-divider>
        <mat-list-item style="height: 30px;" class="commercial-information-risk-money-font">Profile of Convenience:</mat-list-item>
        <mat-list-item style="height: 0px;" class="commercial-information-risk-money-font">Knowledge and Experience</mat-list-item>
        <mat-list-item style="margin-top: 10px; height: 30px;" class="commercial-information-products-font">Profile status:
          <span class="commercial-information-results-color-text">&emsp;{{ customerDerivativeStatus }}</span>
        </mat-list-item>
        <mat-list-item style="height: 0px;" class="commercial-information-products-font">Products:
          <span class="commercial-information-results-color-text">&emsp;{{ customerProductsQty }}</span>
        </mat-list-item>
      </mat-list>

    </mat-grid-tile>
  </mat-grid-list>
</mat-card-content>

<br><br>

<!-------------- BANNER GLOBAL POSITION -------------->
<mat-card-content class="mat-elevation-z4 global-position-header-style">
  <mat-grid-list cols="4" rowHeight="30px">
    <mat-grid-tile  [colspan]="4" [rowspan]="1" style="background-color: aliceblue;">
      <strong>Global position</strong>

    </mat-grid-tile>

    <!--<mat-grid-tile  [colspan]="1" [rowspan]="1" style="background-color: aliceblue;">
      *ngIf="isGlobalPositionLoading"
     <mat-spinner style="margin-left: auto;" [diameter]="20"></mat-spinner>

    </mat-grid-tile> -->
    <mat-grid-tile *ngIf="!tableIsFilled" [colspan]="4" [rowspan]="1" style="background-color: white;">
      <span *ngIf="!showTableLoading">  Search a customer...</span>
      <mat-spinner *ngIf="showTableLoading" [diameter]="50"></mat-spinner>


    </mat-grid-tile>
  </mat-grid-list>
</mat-card-content>

<div *ngIf="tableIsFilled">
  <mat-card-content class="mat-elevation-z4 global-position-header-style">
    <mat-grid-list cols="2" rowHeight="30px">
      <mat-grid-tile  [colspan]="1" [rowspan]="1" style="background-color: white;">
        <span *ngIf="!hasAccounts">Any account found for this customer...</span>
      </mat-grid-tile>
      <mat-grid-tile  [colspan]="1" [rowspan]="1" style="background-color: white;">
        <button mat-stroked-button class="button-add-account" (click)="openDialog()">Add</button>
      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>
</div>

<!-------------- TABLE WITH BANK ACCOUNTS -------------->
<table *ngIf="tableIsFilled" mat-table
       [dataSource]="dataSourceAccounts" multiTemplateDataRows
       class="mat-elevation-z4">
  <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay">
    <th mat-header-cell *matHeaderCellDef> {{column}} </th>
    <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
  </ng-container>

  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
  <ng-container matColumnDef="expandedDetail">
    <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">

      <div class="example-element-detail"
           [@detailExpand]="element == expandedAccount ? 'expanded' : 'collapsed'">
        <div class="example-element-diagram">
          <!--<div class="example-element-position"> {{element.position}} </div>
          <div class="example-element-symbol"> {{element.position}} </div>
          <div class="example-element-name"> {{element.name}} </div>
          <div class="example-element-weight"> {{element.amount}} €</div>-->
          <div mat-card-avatar class="example-header-image"> </div>


        </div>

        <mat-list>
          <mat-list-item>
            <u>Account Movements</u>
          </mat-list-item>
          <div *ngFor="let description of element.description; last as last">
            <mat-list-item style="width: 100%;">
              <div class="example-element-description">
                Description:
                <span class="example-element-description-attribution"> {{description.description}} </span>
              </div>
              <div class="example-element-description">
                Amount:
                <span class="example-element-description-attribution">{{description.amount}}&#8364; </span>
              </div>

            </mat-list-item>
            <mat-divider [inset]="true" *ngIf="!last"></mat-divider>
          </div>
        </mat-list>
        <br>


      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
      class="example-element-row"
      [class.example-expanded-row]="expandedAccount === element"
      (click)="expandedAccount = expandedAccount === element ? null : element">
  </tr>
  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
</table>



<br><br><br>
