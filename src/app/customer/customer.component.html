<mat-grid-list class="mat-elevation-z4, customer-title-table" cols="1" rowHeight="30px">
  <section>
    <mat-grid-tile class=" mat-elevation-z4" [colspan]="1" [rowspan]="1"
                   style="background-color: aliceblue;">
      <div class="home-expenses-icon"></div>
      <strong>Customer Data</strong>
    </mat-grid-tile>
  </section>
</mat-grid-list>
<div>
  <table-with-customers></table-with-customers>
</div>


<!--<h2 class="example-h2">Material Grid List</h2>-->
<mat-grid-list style="margin-top: 220px;" class="mat-elevation-z4" cols="3" rowHeight="40px">

  <section>
    <mat-radio-group [(ngModel)]="mode">
      <mat-grid-tile class=" mat-elevation-z4" [colspan]="1" [rowspan]="1"
                     style="background-color: aliceblue;">
        <mat-radio-button class="customer-radio-button" value="addcustomer">
          Add customer
        </mat-radio-button>
      </mat-grid-tile>

      <mat-grid-tile class=" mat-elevation-z4" [colspan]="1" [rowspan]="1"
                     style="background-color: aliceblue;">
        <mat-radio-button class="customer-radio-button" value="deletecustomer">
          Delete customer
        </mat-radio-button>
      </mat-grid-tile>

      <mat-grid-tile class="  mat-elevation-z4" [colspan]="1" [rowspan]="1"
                     style="background-color: aliceblue;">
        <mat-radio-button class="customer-radio-button" value="updatecustomer">
          Update customer
        </mat-radio-button>
      </mat-grid-tile>
    </mat-radio-group>
  </section>

</mat-grid-list>

<div class="customer-content-container" *ngIf="mode === 'addcustomer'">
  <mat-card-content>
    <mat-grid-list cols="1" rowHeight="500px">
      <mat-grid-tile class="mat-elevation-z4 " [colspan]="1" [rowspan]="1"
                     style="background-color: lightgray;">

        <mat-dialog-content style="width: 100%;">
          <form class="customer-form-width">

            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <input matInput placeholder="First Name" [formControl]="firstNameControl"
                     [errorStateMatcher]="matcher">
              <mat-error *ngIf="firstNameControl.hasError('required')">
                First name is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <br><br>
            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <input matInput placeholder="Last Name" [formControl]="lastNameControl"
                     [errorStateMatcher]="matcher">
              <mat-error *ngIf="lastNameControl.hasError('required')">
                Last name is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <br><br>
            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <input matInput placeholder="DNI" [formControl]="dniControl"
                     [errorStateMatcher]="matcher">
              <mat-error *ngIf="dniControl.hasError('required')">
                DNI is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="dniControl.hasError('minlength') && !dniControl.hasError('required')">
                The dni require <strong>9</strong> characters
              </mat-error>
            </mat-form-field>
            <br><br>
            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <input matInput placeholder="Phone number" [formControl]="phoneControl"
                     [errorStateMatcher]="matcher">
              <mat-error *ngIf="phoneControl.hasError('required')">
                Phone number is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="phoneControl.hasError('minlength') && !phoneControl.hasError('required')">
                The phone number require <strong>9</strong> characters              </mat-error>
            </mat-form-field>
            <br><br>
            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <input matInput placeholder="Address" [formControl]="homeControl"
                     [errorStateMatcher]="matcher">
              <mat-error *ngIf="homeControl.hasError('required')">
                Home address is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <br><br>
            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <mat-label>Level of exposure to risk of money-laundering:
              </mat-label>
              <mat-select [formControl]="exposureControl" required>
                <mat-option>--</mat-option>
                <mat-option *ngFor="let level of exposureLevels" [value]="level">
                  {{level.level}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="exposureControl.hasError('required')">Please choose a level of exposure</mat-error>
              <mat-hint>{{exposureControl.value?.sound}}</mat-hint>
            </mat-form-field>

            <mat-form-field style="width: 100%; padding-left: 20px;" class="example-full-width">
              <mat-label>Office:
              </mat-label>
              <mat-select [formControl]="officeControl" required>
                <mat-option>--</mat-option>
                <mat-option *ngFor="let office of offices" [value]="office">
                  {{office.name}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="officeControl.hasError('required')">Please choose an Office</mat-error>
              <mat-hint>{{officeControl.value?.sound}}</mat-hint>
            </mat-form-field>

          <!--TODO: Add investment and derivative products-->

          </form>

        </mat-dialog-content>
        <mat-dialog-actions align="end">
          <button mat-button mat-dialog-close>Cancel</button>
          <button [disabled]=" phoneControl.hasError('required') ||
                               homeControl.hasError('required') ||
                               dniControl.hasError('required') ||
                               phoneControl.hasError('minlength') ||
                               dniControl.hasError('minlength') ||
                               firstNameControl.hasError('required') ||
                               lastNameControl.hasError('required') ||
                               officeControl.hasError('required') ||
                               exposureControl.hasError('required')"

                  mat-button cdkFocusInitial (click)="createCustomer()">Store Customer
          </button>
        </mat-dialog-actions>
      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>
</div>

<div class="customer-content-container" *ngIf="mode === 'deletecustomer'">
  <mat-card-content>
    <mat-grid-list cols="1" rowHeight="200px">
      <mat-grid-tile class="mat-elevation-z4 " [colspan]="1" [rowspan]="1"
                     style="background-color: lightgray;">
        <form class="customer-form-width" [formGroup]="deleteForm" (ngSubmit)="deleteCustomer()">


          <label>
            Put a valid DNI to delete the customer:
            <input type="text" formControlName="customerId">
            <div *ngIf="submitted && messageFormDeleteCustomer.controls.customerId.errors" class="error">
              <div *ngIf="messageFormDeleteCustomer.controls.customerId.errors.required">The ID was not found</div>
            </div>
          </label>


          <input type="submit" value="Remove customer" class="customer-button-add">

        </form>

      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>
</div>

<div class="customer-content-container" *ngIf="mode === 'updatecustomer'">
  <mat-card-content>
    <mat-grid-list cols="1" rowHeight="100px">
      <mat-grid-tile class="mat-elevation-z4 " [colspan]="1" [rowspan]="1"
                     style="background-color: lightgray;">
        <form class="customer-form-width" [formGroup]="findForm" (ngSubmit)="findCustomer()">
          <span>Put a valid DNI to find a customer to update:</span>
          <input type="text" formControlName="customerId">
          <!--  <div *ngIf="submittedGet && messageFormFindCustomer.controls.customerId.errors" class="error">
              <div *ngIf="messageFormFindCustomer.controls.customerId.errors.required">DNI not found</div>
            </div>-->
          <input type="submit" value="Find customer" class="customer-button-add button-find-style">

        </form>
      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>


  <mat-card-content *ngIf="updateCustomerForm">
    <mat-grid-list cols="1" rowHeight="500px">
      <mat-grid-tile class="mat-elevation-z4 " [colspan]="1" [rowspan]="1"
                     style="background-color: lightgray;">
        <form class="customer-form-width" [formGroup]="updateForm" (ngSubmit)="updateCustomer()">

          <label>
            First name:
            <input matInput type="text" formControlName="firstNameUpdate">
          </label>

          <label>
            Second name:
            <input matInput type="text" formControlName="lastNameUpdate">
          </label>

          <label>
            NIF/NIE:
            <input matInput type="text" formControlName="dniUpdate">
          </label>

          <label>
            Home address:
            <input matInput type="text" formControlName="addressUpdate">
          </label>

          <label>
            Phone number:
            <input matInput type="text" formControlName="phoneUpdate">
          </label>

          <input type="submit" value="Update customer" class="customer-button-add">

        </form>

      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>

</div>

<div class="customer-content-container" *ngIf="!mode">
  <mat-card-content>
    <mat-grid-list cols="1" rowHeight="500px">
      <mat-grid-tile *ngIf="!message" [colspan]="1" [rowspan]="1"
                     style="background-color: white;">
      </mat-grid-tile>
      <mat-grid-tile *ngIf="message === 'addcustomer'" class="mat-elevation-z4 " [colspan]="1"
                     [rowspan]="1" style="background-color: lightgray;">
        The customer was added successfully.
      </mat-grid-tile>
      <mat-grid-tile *ngIf="message === 'deletecustomer'" class="mat-elevation-z4 " [colspan]="1"
                     [rowspan]="1" style="background-color: lightgray;">
        The customer was removed successfully.
      </mat-grid-tile>
      <mat-grid-tile *ngIf="message === 'updatecustomer'" class="mat-elevation-z4 " [colspan]="1"
                     [rowspan]="1" style="background-color: lightgray;">
        The customer was updated successfully.
      </mat-grid-tile>
    </mat-grid-list>
  </mat-card-content>
</div>

